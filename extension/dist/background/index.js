(()=>{"use strict";function e(){const e=new Date,t=new Date(e);return t.setDate(t.getDate()+1),t.setHours(0,0,0,0),t.getTime()}chrome.runtime.onInstalled.addListener((()=>{const t=(new Date).toISOString().split("T")[0];chrome.storage.local.set({currentTodos:[],todoHistory:{[t]:[]}}),chrome.alarms.create("daily-refresh",{periodInMinutes:1440,when:e()})})),chrome.alarms.onAlarm.addListener((async e=>{if("daily-refresh"===e.name){const{currentTodos:e}=await chrome.storage.local.get("currentTodos"),{todoHistory:t}=await chrome.storage.local.get("todoHistory"),o=(new Date).toISOString().split("T")[0],r={...t,[o]:e},a=e.map((e=>({...e,completed:!1})));await chrome.storage.local.set({currentTodos:a,todoHistory:r})}else e.name.startsWith("todo-")&&chrome.notifications.create(e.name,{type:"basic",iconUrl:"icons/icon128.png",title:"Todo Reminder",message:"You have a pending todo item!",priority:2})}))})();